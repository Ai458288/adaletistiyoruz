<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Umut İçin Adalet - Oyun</title>

<style>
html,body{
  margin:0;
  padding:0;
  background:black;
  overflow:hidden;
  touch-action:none;
  user-select:none;
  font-family:Arial;
}

/* KARARMA */
#overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.92);
  z-index:50;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  color:white;
}

/* GAME */
#game{
  position:relative;
  width:100vw;
  height:100vh;
  background:radial-gradient(circle,#111,#000);
}

#player{
  position:absolute;
  width:26px;
  height:26px;
  border-radius:50%;
  background:#ff4444;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
}

.target{
  position:absolute;
  width:20px;
  height:20px;
  border-radius:50%;
  background:#00ff88;
}

/* HUD */
#hud{
  position:fixed;
  top:10px;
  right:10px;
  color:#0f0;
  z-index:10;
}

/* BUTTON */
.btn{
  position:fixed;
  background:rgba(255,255,255,0.15);
  border:1px solid rgba(255,255,255,0.4);
  color:white;
  padding:14px;
  border-radius:12px;
  font-size:18px;
}

/* SOL ALT */
#up{left:20px;bottom:110px}
#down{left:20px;bottom:40px}

/* SAĞ ALT */
#left{right:110px;bottom:60px}
#right{right:20px;bottom:60px}
</style>
</head>

<body>

<!-- BAŞLANGIÇ -->
<div id="overlay">
  <h2>Kaç hedef?</h2>
  <input id="count" type="number" value="10" min="1" style="font-size:20px;width:80px;text-align:center">
  <br><br>
  <button onclick="startGame()" style="font-size:20px">Başla</button>
</div>

<div id="game">
  <div id="player"></div>
</div>

<div id="hud">Hedef: <span id="leftCount">0</span></div>

<div id="up" class="btn">⬆</div>
<div id="down" class="btn">⬇</div>
<div id="left" class="btn">⬅</div>
<div id="right" class="btn">➡</div>

<script>
const player=document.getElementById("player");
const game=document.getElementById("game");
const overlay=document.getElementById("overlay");
const hud=document.getElementById("leftCount");

let px=innerWidth/2, py=innerHeight/2;
let speed=Math.max(innerWidth,innerHeight)/200;
let move={up:false,down:false,left:false,right:false};

let targets=[];
let total=0, collected=0;

/* INPUT */
function bind(id,key){
  const b=document.getElementById(id);
  b.ontouchstart=e=>{e.preventDefault();move[key]=true};
  b.ontouchend=()=>move[key]=false;
}
bind("up","up");bind("down","down");bind("left","left");bind("right","right");

/* GAME */
function spawn(){
  const t=document.createElement("div");
  t.className="target";
  t.x=Math.random()*(innerWidth-30);
  t.y=Math.random()*(innerHeight-30);
  t.style.left=t.x+"px";
  t.style.top=t.y+"px";
  game.appendChild(t);
  targets.push(t);
}

function ensure(){
  while(targets.length<5 && collected<total) spawn();
}

function collision(){
  targets=targets.filter(t=>{
    if(Math.hypot(px-t.x,py-t.y)<22){
      game.removeChild(t);
      collected++;
      hud.textContent=total-collected;
      return false;
    }
    return true;
  });
  if(collected>=total) finish();
}

function finish(){
  overlay.style.display="flex";
  overlay.innerHTML="<h1>Tebrikler!</h1><p>Oyun Bitti</p><button onclick='location.reload()'>Tekrar Başla</button>";
}

/* LOOP */
function loop(){
  if(move.up)py-=speed;
  if(move.down)py+=speed;
  if(move.left)px-=speed;
  if(move.right)px+=speed;

  player.style.left=px+"px";
  player.style.top=py+"px";

  ensure(); collision();
  requestAnimationFrame(loop);
}

function startGame(){
  total=parseInt(document.getElementById("count").value);
  collected=0;
  hud.textContent=total;
  overlay.style.display="none";
  ensure();
  loop();
}
</script>
</body>
</html>
