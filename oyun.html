<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>Oyun</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;user-select:none}
body{
  background:radial-gradient(circle at top,#020617,#000);
  overflow:hidden;
  touch-action:none;
  color:#fff;
  font-family:Arial;
}

/* Ã¼st bilgi */
#hud{
  position:fixed;
  top:10px;
  left:10px;
  z-index:20;
  font-size:18px;
}

/* AI tuÅŸu */
#aiBtn{
  position:fixed;
  top:10px;
  right:10px;
  z-index:30;
  padding:8px 12px;
  border-radius:12px;
  border:none;
  background:rgba(255,255,255,.12);
  color:#fff;
}
#aiBtn.active{
  background:linear-gradient(90deg,#22c55e,#16a34a);
}

/* oyuncu */
#player{
  width:40px;
  height:40px;
  border-radius:50%;
  background:#22c55e;
  position:absolute;
}

/* hedef */
.target{
  width:30px;
  height:30px;
  border-radius:50%;
  background:#ef4444;
  position:absolute;
}

/* kontroller */
.controls{
  position:fixed;
  bottom:15px;
  width:100%;
  display:flex;
  justify-content:space-between;
  padding:0 20px;
  z-index:20;
}
.group{
  display:flex;
  flex-direction:column;
  gap:10px;
}
.btn{
  width:60px;
  height:60px;
  border-radius:16px;
  background:rgba(255,255,255,.15);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:24px;
}

/* baÅŸlangÄ±Ã§ */
#start{
  position:fixed;
  inset:0;
  background:#000;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  z-index:50;
}
#start button{
  margin-top:20px;
  padding:12px 25px;
  border:none;
  border-radius:14px;
  font-size:18px;
}

/* bitiÅŸ */
#end{
  position:fixed;
  inset:0;
  background:#000;
  display:none;
  align-items:center;
  justify-content:center;
  z-index:60;
}
#endBox{
  border:4px solid red;
  padding:20px;
  animation:rgb 2s linear infinite;
}
@keyframes rgb{
  0%{box-shadow:0 0 10px red}
  50%{box-shadow:0 0 25px red}
  100%{box-shadow:0 0 10px red}
}
</style>
</head>

<body>

<div id="hud">ðŸŽ¯ Kalan: <span id="left">0</span></div>
<button id="aiBtn">ðŸ¤– AI</button>

<div id="player"></div>

<div class="controls" id="controls">
  <div class="group">
    <div class="btn" data-x="-1">â¬†</div>
    <div class="btn" data-x="-1">â¬‡</div>
  </div>
  <div class="group" style="flex-direction:row">
    <div class="btn" data-y="-1">â¬…</div>
    <div class="btn" data-y="1">âž¡</div>
  </div>
</div>

<div id="start">
  <h2>Hedef SayÄ±sÄ±</h2>
  <input id="count" type="number" value="5" min="1" style="padding:10px">
  <button onclick="startGame()">BaÅŸla</button>
</div>

<div id="end">
  <div id="endBox">
    <img src="win.gif" width="200"><br><br>
    <h2 style="color:cyan">Tebrikler! KazandÄ±n</h2><br>
    <button onclick="location.reload()">Tekrar BaÅŸla</button>
  </div>
</div>

<script>
let px=100,py=100,sx=0,sy=0;
let targets=[],need=0;
let ai=false;

const player=document.getElementById("player");
const leftTxt=document.getElementById("left");
const controls=document.getElementById("controls");

function spawn(){
  const t=document.createElement("div");
  t.className="target";
  t.x=Math.random()*(innerWidth-40);
  t.y=Math.random()*(innerHeight-40);
  t.style.left=t.x+"px";
  t.style.top=t.y+"px";
  document.body.appendChild(t);
  targets.push(t);
}

function startGame(){
  need=+count.value;
  leftTxt.textContent=need;
  document.getElementById("start").style.display="none";
  spawn();
}

document.querySelectorAll(".btn").forEach(b=>{
  b.ontouchstart=()=>{
    sx=b.dataset.y?b.dataset.y*2:0;
    sy=b.dataset.x?b.dataset.x*2:0;
  }
  b.ontouchend=()=>{sx=sy=0}
});

aiBtn.onclick=()=>{
  ai=!ai;
  aiBtn.classList.toggle("active");
  controls.style.display=ai?"none":"flex";
};

function loop(){
  if(ai && targets[0]){
    const t=targets[0];
    sx=Math.sign(t.x-px)*2;
    sy=Math.sign(t.y-py)*2;
  }

  px+=sx; py+=sy;
  player.style.left=px+"px";
  player.style.top=py+"px";

  targets.forEach((t,i)=>{
    if(Math.hypot(px-t.x,py-t.y)<30){
      t.remove();
      targets.splice(i,1);
      need--;
      leftTxt.textContent=need;
      if(need>0) spawn();
      else document.getElementById("end").style.display="flex";
    }
  });

  requestAnimationFrame(loop);
}
loop();

document.addEventListener("visibilitychange",()=>{
  if(document.hidden) location.reload();
});
</script>

</body>
</html>
