<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Adalet Oyunu</title>

<style>
*{
  box-sizing:border-box;
  user-select:none;
  -webkit-user-select:none;
  -webkit-touch-callout:none;
}

body{
  margin:0;
  font-family:system-ui;
  background:#020617;
  color:#e5e7eb;
  overflow:hidden;
}

/* OYUN */
#game{
  position:relative;
  width:100vw;
  height:100vh;
}

/* KARARMA */
#dark{
  position:absolute;
  inset:0;
  background:black;
  opacity:.7;
  pointer-events:none;
  transition:.4s;
}

/* KARAKTER */
#player{
  position:absolute;
  width:50px;
  height:50px;
  border-radius:14px;
  background:linear-gradient(135deg,#a78bfa,#6366f1);
  box-shadow:0 0 20px #6366f1;
}

/* HEDEF */
.target{
  position:absolute;
  width:26px;
  height:26px;
  border-radius:50%;
  background:#22c55e;
  box-shadow:0 0 15px #22c55e;
}

/* √úST Bƒ∞LGƒ∞ */
#ui{
  position:fixed;
  top:10px;
  left:50%;
  transform:translateX(-50%);
  padding:10px 16px;
  border-radius:999px;
  background:rgba(0,0,0,.5);
  font-weight:600;
}

/* BA≈ûLANGI√á */
#start{
  position:fixed;
  inset:0;
  background:black;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:20px;
  z-index:5;
}

#start input{
  width:80px;
  padding:10px;
  font-size:20px;
  text-align:center;
  border-radius:10px;
  border:none;
}

#start button{
  padding:14px 26px;
  border-radius:999px;
  border:none;
  font-size:18px;
  font-weight:700;
  background:#22c55e;
  color:black;
}

/* TU≈ûLAR */
.controls{
  position:fixed;
  display:grid;
  gap:10px;
}

.btn{
  width:70px;
  height:70px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.2);
  background:rgba(255,255,255,.08);
  color:white;
  font-size:30px;
}

#left{
  bottom:20px;
  left:20px;
  grid-template-columns:repeat(3,70px);
  grid-template-rows:repeat(3,70px);
}

#right{
  bottom:20px;
  right:20px;
  grid-template-columns:repeat(2,70px);
}

/* Bƒ∞Tƒ∞≈û */
#finish{
  position:fixed;
  inset:0;
  background:black;
  display:none;
  align-items:center;
  justify-content:center;
  flex-direction:column;
  gap:16px;
  z-index:10;
}

#finish video,#finish img{
  width:220px;
  height:220px;
  object-fit:cover;
  border-radius:18px;
}

#finish button{
  padding:12px 24px;
  border-radius:999px;
  border:none;
  font-weight:700;
}
</style>
</head>

<body>

<div id="game">
  <div id="player"></div>
  <div id="dark"></div>
</div>

<div id="ui">üéØ Toplanan: <span id="got">0</span>/<span id="need">0</span></div>

<!-- BA≈ûLANGI√á -->
<div id="start">
  <h2>Ka√ß hedef toplansƒ±n?</h2>
  <input id="count" type="number" value="10" min="1">
  <button id="begin">Ba≈üla</button>
</div>

<!-- SOL ALT -->
<div id="left" class="controls">
  <div></div><button class="btn" data="up">‚¨ÜÔ∏è</button><div></div>
  <button class="btn" data="left">‚¨ÖÔ∏è</button><div></div><button class="btn" data="right">‚û°Ô∏è</button>
  <div></div><button class="btn" data="down">‚¨áÔ∏è</button><div></div>
</div>

<!-- SAƒû ALT -->
<div id="right" class="controls">
  <button class="btn" data="back">‚è™</button>
  <button class="btn" data="forward">‚è©</button>
</div>

<!-- Bƒ∞Tƒ∞≈û -->
<div id="finish">
  <video src="kazanan-video.mp4" autoplay loop muted></video>
  <!-- GIF i√ßin: <img src="kazanan.gif"> -->
  <h2>üéâ Tebrikler!</h2>
  <button onclick="location.reload()">üîÑ Tekrar Ba≈üla</button>
</div>

<script>
const player=document.getElementById("player");
const dark=document.getElementById("dark");
const gotT=document.getElementById("got");
const needT=document.getElementById("need");
const start=document.getElementById("start");
const finish=document.getElementById("finish");

let x=innerWidth/2-25,y=innerHeight/2-25;
let need=0,got=0,active=false;
let targets=[];

function draw(){
  player.style.left=x+"px";
  player.style.top=y+"px";
}
draw();

function move(dx,dy){
  if(!active) return;
  x=Math.max(0,Math.min(innerWidth-50,x+dx));
  y=Math.max(0,Math.min(innerHeight-50,y+dy));
  draw();
}

document.querySelectorAll(".btn").forEach(b=>{
  b.ontouchstart=b.onmousedown=()=>{
    const d=b.dataset;
    if(d=="left")move(-25,0);
    if(d=="right")move(25,0);
    if(d=="up")move(0,-25);
    if(d=="down")move(0,25);
    if(d=="back")move(-40,0);
    if(d=="forward")move(40,0);
  };
});

function spawn(){
  if(targets.length>=5) return;
  const t=document.createElement("div");
  t.className="target";
  t.style.left=Math.random()*(innerWidth-30)+"px";
  t.style.top=Math.random()*(innerHeight-30)+"px";
  document.getElementById("game").appendChild(t);
  targets.push(t);
}

function check(){
  targets.forEach((t,i)=>{
    const a=t.getBoundingClientRect();
    const b=player.getBoundingClientRect();
    if(a.left<b.right&&a.right>b.left&&a.top<b.bottom&&a.bottom>b.top){
      t.remove();
      targets.splice(i,1);
      got++;
      gotT.textContent=got;
      if(got>=need){
        active=false;
        dark.style.opacity=1;
        finish.style.display="flex";
      }else{
        spawn();
      }
    }
  });
}

setInterval(()=>{ if(active){spawn();check();}},100);

document.getElementById("begin").onclick=()=>{
  need=parseInt(document.getElementById("count").value)||5;
  needT.textContent=need;
  start.style.display="none";
  dark.style.opacity=.7;
  active=true;
  for(let i=0;i<4;i++)spawn();
};
</script>

</body>
</html>
