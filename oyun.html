<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Umut İçin Adalet - Oyun</title>

<style>
html,body{
  margin:0;
  padding:0;
  background:#000;
  overflow:hidden;
  touch-action:none;
  user-select:none;
  font-family:Arial;
}

#game{
  position:relative;
  width:100vw;
  height:100vh;
  background:radial-gradient(circle,#111,#000);
}

/* PLAYER */
#player{
  position:absolute;
  width:28px;
  height:28px;
  border-radius:50%;
  background:#ff4444;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  z-index:5;
}

/* TARGET */
.target{
  position:absolute;
  width:22px;
  height:22px;
  border-radius:50%;
  background:#00ff88;
}

/* HUD */
#hud{
  position:fixed;
  top:10px;
  right:10px;
  color:#0f0;
  font-size:14px;
  z-index:10;
}

/* BUTTON BASE */
.btn{
  position:fixed;
  background:rgba(255,255,255,0.12);
  border:1px solid rgba(255,255,255,0.4);
  color:white;
  padding:14px;
  border-radius:12px;
  font-size:18px;
}

/* SOL ALT – İLERİ GERİ */
#forward{ left:20px; bottom:110px; }
#back{ left:20px; bottom:40px; }

/* SAĞ ALT – SAĞ SOL */
#left{ right:110px; bottom:60px; }
#right{ right:20px; bottom:60px; }

/* SOL ÜST */
#zoomBtn{
  left:20px;
  top:20px;
  background:rgba(255,0,0,0.7);
}

#joystickBtn{
  left:20px;
  top:70px;
  background:rgba(255,255,255,0.15);
}

/* JOYSTICK */
#joystickArea{
  display:none;
  position:fixed;
  left:0;
  right:0;
  bottom:0;
  height:35%;
  background:rgba(255,0,0,0.12);
}

#stick{
  position:absolute;
  width:60px;
  height:60px;
  border-radius:50%;
  background:rgba(255,255,255,0.35);
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
}
</style>
</head>

<body>
<div id="game">
  <div id="player"></div>
</div>

<div id="hud">Hedef: <span id="leftCount">0</span></div>

<!-- TUŞLAR -->
<div id="forward" class="btn">⬆</div>
<div id="back" class="btn">⬇</div>
<div id="left" class="btn">⬅</div>
<div id="right" class="btn">➡</div>

<div id="zoomBtn" class="btn">Yakınlaş</div>
<div id="joystickBtn" class="btn">Joystick</div>

<div id="joystickArea">
  <div id="stick"></div>
</div>

<script>
/* ==== GAME STATE ==== */
const player=document.getElementById("player");
const game=document.getElementById("game");
const hud=document.getElementById("leftCount");

let px=window.innerWidth/2;
let py=window.innerHeight/2;
let speed=3;

let move={up:false,down:false,left:false,right:false};

let targets=[];
let totalTarget=10;
let collected=0;

/* ==== TARGET ==== */
function spawnTarget(){
  const t=document.createElement("div");
  t.className="target";
  t.x=Math.random()*(window.innerWidth-30);
  t.y=Math.random()*(window.innerHeight-30);
  t.style.left=t.x+"px";
  t.style.top=t.y+"px";
  game.appendChild(t);
  targets.push(t);
}

function ensureTargets(){
  while(targets.length<5 && collected<totalTarget){
    spawnTarget();
  }
}

/* ==== COLLISION ==== */
function checkCollision(){
  targets=targets.filter(t=>{
    const dx=px - t.x;
    const dy=py - t.y;
    if(Math.hypot(dx,dy)<25){
      game.removeChild(t);
      collected++;
      hud.textContent=totalTarget-collected;
      return false;
    }
    return true;
  });
}

/* ==== INPUT ==== */
function bind(btn,key){
  btn.addEventListener("touchstart",e=>{e.preventDefault();move[key]=true});
  btn.addEventListener("touchend",()=>move[key]=false);
}

bind(forward,"up");
bind(back,"down");
bind(left,"left");
bind(right,"right");

/* ==== JOYSTICK ==== */
const joyArea=document.getElementById("joystickArea");
const stick=document.getElementById("stick");
let joy=false;

joyArea.addEventListener("touchstart",e=>joy=true);
joyArea.addEventListener("touchend",()=>{
  joy=false;
  move={up:false,down:false,left:false,right:false};
});

joyArea.addEventListener("touchmove",e=>{
  if(!joy)return;
  const t=e.touches[0];
  const r=joyArea.getBoundingClientRect();
  const cx=r.width/2;
  const cy=r.height/2;
  const dx=t.clientX-cx;
  const dy=t.clientY-(r.top+cy);

  move.up=dy<-15;
  move.down=dy>15;
  move.left=dx<-15;
  move.right=dx>15;
});

/* ==== BUTTON LOGIC ==== */
joystickBtn.onclick=()=>{
  const show=joyArea.style.display==="block";
  joyArea.style.display=show?"none":"block";
};

zoomBtn.onclick=()=>{
  speed = speed===3 ? 5 : 3;
  zoomBtn.textContent = speed===5 ? "Uzaklaş" : "Yakınlaş";
};

/* ==== LOOP ==== */
function loop(){
  if(move.up) py-=speed;
  if(move.down) py+=speed;
  if(move.left) px-=speed;
  if(move.right) px+=speed;

  px=Math.max(0,Math.min(px,window.innerWidth-28));
  py=Math.max(0,Math.min(py,window.innerHeight-28));

  player.style.left=px+"px";
  player.style.top=py+"px";

  ensureTargets();
  checkCollision();

  requestAnimationFrame(loop);
}

/* START */
hud.textContent=totalTarget;
ensureTargets();
loop();
</script>
</body>
</html>
